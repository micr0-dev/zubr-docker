<VirtualHost *:80>
    ServerName your-domain.com
    
    # Proxy settings for WebSocket support
    ProxyPreserveHost On
    ProxyRequests Off
    
    ProxyPass /api http://localhost:3000/api
    ProxyPassReverse /api http://localhost:3000/api

    ProxyPass /irc http://localhost:6667
    ProxyPassReverse /irc http://localhost:6667
    
    RewriteEngine On
    RewriteCond %{REQUEST_URI} !^/api
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://localhost:9000/$1 [P,L]
    
    RewriteCond %{REQUEST_URI} !^/api
    RewriteCond %{HTTP:Upgrade} !=websocket [NC]
    RewriteRule /(.*)           http://localhost:9000/$1 [P,L]
    
    # Main web interface
    ProxyPass / http://localhost:9000/
    ProxyPassReverse / http://localhost:9000/
</VirtualHost>